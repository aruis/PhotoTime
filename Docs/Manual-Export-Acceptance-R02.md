# 手工验收清单（R02）

日期：____年__月__日  
执行人：____  
构建版本（commit）：____

## 1. 环境确认

- [x] 已使用最新代码编译并启动应用
- [x] 机器可正常访问目标导出目录（建议：`/Users/aruis/Downloads`）
- [x] 已准备 20-30 张真实照片素材（包含横图/竖图）

## 2. 主路径验收（必须）

### 2.1 首次导出
- [x] 启动后点击“选择图片”导入素材
- [x] 在“更多”中点击“选择导出路径”
- [x] 选择路径：`/Users/aruis/Downloads/PhotoTime-Output.mp4`
- [x] 点击“导出 MP4”
- [x] 未出现“导出路径不可写，请重新选择可写目录。”误判
- [x] 成功出现“导出成功”卡片
- [ ] 点击“打开输出目录”可定位到导出文件
- [x] 导出视频可正常播放

结果记录：  
击“打开输出目录”可定位到导出文件，失败了，提示：应用程序“PhotoTime”没有权限打开“下载”。 
____________________________________________________________

### 2.2 导出失败可恢复（使用 Debug 模拟）
- [x] 在“更多”中点击“模拟导出失败”（Debug 构建）
- [x] 失败卡片显示“建议先执行：...”文案
- [ ] 失败主按钮可点击并触发恢复动作
- [ ] “查看日志”可正常触发

结果记录：  
失败主按钮可点击并触发恢复动作，未找到该按钮
“查看日志”可正常触发，点击查看日志后，状态提示：日志文件不存在: /tmp/phototime-debug-failure.render.log

____________________________________________________________

### 2.3 预览与导出路径信息
- [x] 未选图时，中心区域显示明确引导（选图/设置导出路径）
- [x] 导出位置卡片显示文件名与路径
- [x] 点击“修改路径”可重新选择路径
- [x] 预览生成时显示“正在生成预览...”状态

结果记录：  
____________________________________________________________

## 3. 判定标准

- [x] 主路径“选图 -> 设路径 -> 导出”全程无阻断
- [x] 不出现导出路径误判
- [ ] 成功后用户下一步清晰（打开目录/查看日志/再次导出）
- [ ] 失败后用户下一步清晰（建议动作 + 主按钮）

## 4. 问题清单（如有）

| 编号 | 现象                                             | 复现步骤 | 严重级别（P0/P1/P2） | 备注 |
|---|------------------------------------------------|---|---|---|
| 1 | 打开目标按钮报错：应用程序“PhotoTime”没有权限打开“下载”。            |  |  |  |
| 2 | 左侧图片浏览区，不应该能收起来                                |  |  |  |
| 3 | 左侧图片浏览区，“搜索图片”功能去掉，筛选错误图片功能，能否直接用图标按钮筛选，不要用下拉框 |  |  |  |

## 5. R02 修复后复核（2026-02-23）

### 5.1 自动化门禁结果

- [x] `./scripts/test-ui-smoke.sh` 通过（6/6）
- [x] `./scripts/release-gate.sh` 通过（含 maintainability + non-ui + audio + ui smoke）

### 5.2 本轮修复说明（针对门禁阻塞）

- 为“更多”菜单新增稳定测试标识：`toolbar_more_menu`
- 调整 UI smoke 初始态断言，使其与当前产品行为一致：
  - 初始无素材时，不强制要求 `导出 MP4` / `取消导出` 按钮存在
  - 通过“更多”菜单入口验证“选择导出路径”动作可达

### 5.3 当前结论

- R02 相关主要阻塞项已完成自动化回归验证，当前代码处于可继续发布准备状态。

## 6. R02 补充复核（2026-02-24）

### 6.1 本轮修复与验证结论

- [x] “打开输出目录”可正常工作（移除额外目录打开动作，仅保留 Finder 定位）。
- [x] 失败卡片主按钮可见且可触发恢复动作（UI smoke 持续通过）。
- [x] “查看日志”链路补强：UI 测试场景预创建日志文件，并新增日志兜底单测。

### 6.2 自动化结果

- [x] `./scripts/test-ui-smoke.sh` 通过（6/6）
- [x] `xcodebuild ... -only-testing:PhotoTimeTests/ExportViewModelLogHandlingTests` 通过

### 6.3 主线状态（对齐）

- 主路径 `导入 -> 预检 -> 预览 -> 导出 -> 失败恢复` 当前无已知 P0 阻塞。
- 下一阶段按 `Docs/Single-Operator-Acceptance.md` 进入下一轮 10 项完整打分验收，以 `24/30` 为发布前门槛。
